<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>3D 大富翁</title>
  <link rel="stylesheet" href="style.css" />

  <script type="importmap">
  {
    "imports": {
      "three": "https://unpkg.com/three@0.160.0/build/three.module.js"
    }
  }
  </script>
</head>
<body>

  <!-- 左上 UI -->
  <div class="ui left">
    <div class="title">3D 大富翁</div>

    <div class="row">
      <div class="kv"><span>回合</span><b id="turn">1</b></div>
      <div class="kv"><span>輪到</span><b id="activePlayer">1</b></div>
    </div>

    <div class="row">
      <div class="kv"><span>骰子</span><b id="dice">-</b></div>
      <div class="kv"><span>位置</span><b id="pos">0</b></div>
    </div>

    <div class="diceBox">
      <img id="diceGif" width="110" height="110" alt="">
      <button id="roll">擲骰</button>
    </div>
  </div>

  <!-- 右上：步數統計 -->
  <div class="ui right">
    <div class="title">Steps</div>

    <div class="pCard" id="p1Card">
      <div class="pName">P1</div>
      <div class="pSteps"><span id="p1Steps">0</span></div>
      <div class="pState" id="p1State"></div>
    </div>

    <div class="pCard" id="p2Card">
      <div class="pName">P2</div>
      <div class="pSteps"><span id="p2Steps">0</span></div>
      <div class="pState" id="p2State"></div>
    </div>

    <div class="pCard" id="p3Card">
      <div class="pName">P3</div>
      <div class="pSteps"><span id="p3Steps">0</span></div>
      <div class="pState" id="p3State"></div>
    </div>

    <button class="reset" id="resetBtn">重開一局</button>
  </div>

  <canvas id="three"></canvas>

  <!-- 小遊戲浮窗 -->
  <div id="miniOverlay" class="overlay" style="display:none;">
    <div class="modal big">
      <div class="modalHeader">
        <div class="modalTitle">小遊戲</div>
        <button id="closeMini" class="xbtn">✕</button>
      </div>
      <iframe id="miniFrame" class="frame" src="" loading="eager"></iframe>
    </div>
  </div>

  <!-- 事件彈窗 -->
  <div id="eventOverlay" class="overlay" style="display:none;">
    <div class="modal">
      <div class="modalHeader">
        <div class="modalTitle" id="eventTitle">事件</div>
        <div class="tag" id="eventTag"></div>
      </div>
      <div class="modalBody">
        <div class="eventText" id="eventText"></div>
        <img id="eventImg" class="eventImg" alt="" style="display:none;">
      </div>
      <div class="modalFooter">
        <button id="eventOk">確定</button>
      </div>
    </div>
  </div>

  <script type="module" src="main.js"></script>
</body>
</html>
